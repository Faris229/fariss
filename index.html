<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Riszy Shop รับสินค้า</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<style>
body {
    margin:0;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(to bottom, #d9f2d9, #b3e6b3);
    color: #003300;
    line-height:1.6;
}
.container {
    max-width: 650px;
    margin: 30px auto;
    background: #fff;
    padding: 30px 25px;
    border-radius: 25px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.2);
    text-align: center;
}
.logo { width: 120px; margin-bottom: 15px; }
h1 { margin:10px 0 20px; font-weight:800; color:#006600; font-size:28px; text-shadow:1px 1px 2px rgba(0,0,0,0.2); }

.instructions {
    font-size:16px;
    background: linear-gradient(to bottom, #f0fff0, #e6ffe6);
    padding: 18px 22px;
    border-radius: 18px;
    margin-bottom: 25px;
    color: #004d00;
    text-align:left;
    line-height:1.8;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

label { display:block; margin:15px 0 5px; font-weight:700; text-align:left; font-size:16px; color:#005500; }
input, button { 
    width:100%; padding:14px; border-radius:15px; border:1px solid #b3ffb3; font-size:16px; box-sizing:border-box; margin-bottom:15px;
}
input:focus { outline:none; border-color:#00b300; box-shadow:0 0 12px #00b300; }

button {
    background: linear-gradient(135deg, #00b300, #33cc33);
    color:#fff;
    cursor:pointer;
    font-weight:700;
    border:none;
    border-radius:20px;
    font-size:16px;
    padding:14px;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}
button:hover {
    background: linear-gradient(135deg, #33cc33, #00ff00);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

.product-options {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
}
.product-box {
    background: #e6ffe6;
    border-radius: 20px;
    padding: 15px;
    cursor: pointer;
    border: 2px solid transparent;
    transition: 0.3s;
    text-align: center;
    display: flex;
    flex-direction: column;
    align-items: center;
}
.product-box img {
    width: 120px;
    height: auto;
    margin-bottom: 10px;
    border-radius: 12px;
    object-fit: cover;
}
.product-box.selected {
    border-color: #00b300;
    background: #ccffcc;
}
.product-box:hover {
    background: #d9ffd9;
}
.product-label {
    font-weight:700;
    font-size:16px;
    margin-top:5px;
    color:#006600;
    text-shadow: 0px 1px 1px rgba(0,0,0,0.1);
}

#loaderContainer { display:none; text-align:center; margin-top:15px;}
#loaderBar { width:100%; background:#b3ffb3; border-radius:15px; overflow:hidden; margin-top:20px;}
#loaderProgress { width:0; height:20px; background:#00b300; border-radius:15px; }

#result {
    display:none;
    background:#ccffcc;
    padding:25px;
    border-radius:20px;
    margin-top:20px;
    box-shadow:0 6px 15px rgba(0,0,0,0.2);
    text-align:center;
    font-size:16px;
}
#result h2 {
    color:#007700;
    font-size:22px;
    font-weight:800;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.2);
}
#result p {
    color:#004d00;
    font-weight:600;
    font-size:16px;
}

.copyBtn {
    margin-top:10px;
    width:70%;
    display:inline-block;
    border-radius:20px;
    font-weight:700;
    text-align:center;
    line-height:45px;
    background: linear-gradient(135deg, #009900, #33cc33);
    color:#fff;
    cursor:pointer;
    border:none;
    font-size:16px;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    transition: all 0.3s ease;
}
.copyBtn:hover { 
    background: linear-gradient(135deg, #00cc00, #00ff00);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

/* Popup กลางจอ พร้อมเอฟเฟกต์ไอคอน */
.popup {
    display: none;
    position: fixed;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    width: 90%;
    max-width: 380px;
    background: #fff;
    border-radius: 20px;
    padding: 25px 20px;
    text-align: center;
    box-shadow: 0 15px 35px rgba(0,0,0,0.25);
    z-index: 10000;
    font-weight:600;
    animation: popFadeIn 0.4s ease forwards;
}
.popup-icon {
    font-size: 50px;
    margin-bottom: 15px;
    animation: iconBounce 0.6s ease;
}
.popup h3 {
    margin: 10px 0;
    font-size: 18px;
    color: #333;
}
.popup p {
    font-size: 15px;
    color: #555;
    line-height: 1.5;
}
.popup button {
    margin-top: 15px;
    padding: 12px 25px;
    border:none;
    border-radius:15px;
    background: linear-gradient(135deg, #00b300, #33cc33);
    color:#fff;
    font-weight:700;
    cursor:pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}
.popup button:hover {
    background: linear-gradient(135deg, #33cc33, #00ff00);
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.3);
}

/* Keyframes */
@keyframes popFadeIn {
    0% { opacity:0; transform: translate(-50%, -60%) scale(0.9);}
    100% { opacity:1; transform: translate(-50%, -50%) scale(1);}
}
@keyframes iconBounce {
    0%, 20%, 50%, 80%, 100% { transform: translateY(0);}
    40% { transform: translateY(-10px) scale(1.1);}
    60% { transform: translateY(-5px) scale(1.05);}
}

/* ปุ่มลอยติดต่แอดมิน */
.contact-admin {
    position: fixed;
    bottom: 25px;
    right: 25px;
    width: 60px;
    height: 60px;
    background: linear-gradient(135deg, #1877f2, #00a2ff);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #fff;
    font-size: 28px;
    box-shadow: 0 6px 15px rgba(0,0,0,0.3);
    transition: transform 0.3s, box-shadow 0.3s;
    z-index: 9999;
}
.contact-admin:hover {
    transform: translateY(-5px) scale(1.1);
    box-shadow: 0 10px 25px rgba(0,0,0,0.35);
}
.contact-admin::after {
    content: "ติดต่อแอดมิน";
    position: absolute;
    bottom: 70px;
    right: 50%;
    transform: translateX(50%);
    background: #1877f2;
    color: #fff;
    padding: 6px 12px;
    border-radius: 10px;
    font-size: 12px;
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s, bottom 0.3s;
}
.contact-admin:hover::after {
    opacity: 1;
    bottom: 80px;
}
</style>
</head>
<body>

<div class="container">
    <img src="https://i.postimg.cc/prfwD1yC/22-B127-BF3.png" class="logo">
    <h1>Riszy Shop รับสินค้า</h1>

    <div class="instructions">
        <b>วิธีใช้งานเว็บ:</b><br>
        1. กรอกชื่อในเว็บ<br>
        2. เลือกหมวดสินค้า<br>
        3. เลือกสินค้าในหมวดที่ต้องการ (เลือกได้ 1 ตัว)<br>
        4. กรอกโค้ดจากประวัติการสั่งซื้อ<br>
        5. กดปุ่ม "ยืนยัน"<br>
        6. รอโหลดแล้วกดปุ่มคัดลอกข้อมูล ส่งให้แอดมิน
    </div>

    <div id="formContainer">
        <label for="username">ชื่อในเว็บ</label>
        <input type="text" id="username" placeholder="กรอกชื่อในเว็บ">

        <label>เลือกหมวดสินค้า ที่ซื้อ</label>
        <div class="product-options" id="categoryOptions">
            <div class="product-box" data-category="gem">
                <img src="https://i.postimg.cc/SRgj2qxv/image.png" alt="เพรช">
                <div class="product-label">เพรชฟีฟาย</div>
            </div>
            <div class="product-box" data-category="fluorite">
                <img src="https://i.postimg.cc/hvNydDnb/ffios.png" alt="Fluorite/GBOX">
                <div class="product-label">โปรเเกรมช่วยเล่น</div>
            </div>
        </div>

        <div class="product-options" id="productContainer"></div>

        <label for="code">กรอกโค้ด</label>
        <input type="text" id="code" placeholder="กรอกโค้ดจากประวัติการสั่งซื้อ">

        <button id="submitBtn">ยืนยัน</button>
    </div>

    <div id="loaderContainer">
        <div>กำลังโหลด... <span id="loaderPercent">0%</span></div>
        <div id="loaderBar"><div id="loaderProgress"></div></div>
    </div>

    <div id="result">
        <h2>เรียบร้อย!</h2>
        <button class="copyBtn" id="copyBtn">คัดลอกข้อมูลทั้งหมด</button>
        <p style="margin-top:10px; font-weight:bold;">กดคัดลอกแล้วส่งให้แอดมิน</p>
    </div>
</div>

<!-- Popup กลางจอ พร้อมเอฟเฟกต์ไอคอน -->
<div class="popup" id="popupBox">
    <div class="popup-icon" id="popupIcon"><i class="fa-solid fa-info"></i></div>
    <h3 id="popupTitle">ข้อความ</h3>
    <p id="popupMsg">รายละเอียดข้อความ</p>
    <button onclick="closePopup()">ปิด</button>
</div>

<!-- ปุ่มลอยติดต่แอดมิน -->
<a href="https://www.facebook.com/p/Riszy-shop-61570552356915/" target="_blank" class="contact-admin"><i class="fab fa-facebook-f"></i></a>

<script>
let selectedCategory = null;
let selectedProduct = null;
const categoryOptions = document.querySelectorAll('#categoryOptions .product-box');
const productContainer = document.getElementById('productContainer');

const productsData = {
    gem:[
        {value:'68',name:'เพรช 68',img:'https://i.postimg.cc/J40C2j9y/Fluorite.png'},
        {value:'172',name:'เพรช 172',img:'https://i.postimg.cc/Bbt7MBXQ/Fluorite.png'},
        {value:'310',name:'เพรช 310',img:'https://i.postimg.cc/2jXK3MXM/Fluorite.png'},
        {value:'517',name:'เพรช 517',img:'https://i.postimg.cc/TPYsKxfV/Fluorite.png'},
        {value:'1637',name:'เพรช 1637',img:'https://i.postimg.cc/fRsphXPT/Fluorite.png'},
        {value:'3698',name:'เพรช 3698',img:'https://i.postimg.cc/zX8FzjJ5/Fluorite.png'}
    ],
    fluorite:[
        {value:'Fluorite1',name:'Fluorite 1 วัน',img:'https://i.postimg.cc/htfBYVQx/Fluorite.png'},
        {value:'Fluorite7',name:'Fluorite 7 วัน',img:'https://i.postimg.cc/htfBYVQx/Fluorite.png'},
        {value:'Fluorite31',name:'Fluorite 31 วัน',img:'https://i.postimg.cc/htfBYVQx/Fluorite.png'},
        {value:'GBOX',name:'GBOX',img:'https://i.postimg.cc/GpKZ53Jz/Fluorite.png'}
    ]
};

categoryOptions.forEach(box=>{
    box.addEventListener('click',()=>{
        categoryOptions.forEach(b=>b.classList.remove('selected'));
        box.classList.add('selected');
        selectedCategory = box.getAttribute('data-category');
        selectedProduct = null;
        renderProducts(selectedCategory);
    });
});

function renderProducts(category){
    productContainer.innerHTML='';
    productsData[category].forEach(p=>{
        const div = document.createElement('div');
        div.className='product-box';
        div.setAttribute('data-value',p.value);
        div.innerHTML = `<img src="${p.img}" alt="${p.name}"><div class="product-label">${p.name}</div>`;
        div.addEventListener('click',()=>{
            productContainer.querySelectorAll('.product-box').forEach(b=>b.classList.remove('selected'));
            div.classList.add('selected');
            selectedProduct = p.value;
        });
        productContainer.appendChild(div);
    });
}

/* Popup Functions */
function showPopup(title, msg, type='info'){
    const popup = document.getElementById('popupBox');
    const popupIcon = document.getElementById('popupIcon');
    const popupTitle = document.getElementById('popupTitle');
    const popupMsg = document.getElementById('popupMsg');

    popupTitle.textContent = title;
    popupMsg.textContent = msg;

    if(type==='error'){
        popupIcon.innerHTML = '<i class="fa-solid fa-xmark" style="color:#ff4d4d;"></i>';
    } else if(type==='success'){
        popupIcon.innerHTML = '<i class="fa-solid fa-check" style="color:#00b300;"></i>';
    } else {
        popupIcon.innerHTML = '<i class="fa-solid fa-info" style="color:#009900;"></i>';
    }

    popup.style.display = 'block';
}
function closePopup(){
    document.getElementById('popupBox').style.display='none';
}

function validateCode(code){
    if(!selectedProduct) return false;
    if(selectedCategory=='gem'){
        return new RegExp(`^RSDM${selectedProduct}\\d+$`).test(code);
    } else if(selectedCategory=='fluorite'){
        const patterns = {
            'Fluorite1': /^RSFD1\d+$/,
            'Fluorite7': /^RSFD7\d+$/,
            'Fluorite31': /^RSFD31\d+$/,
            'GBOX': /^RSGB29\d+$/
        };
        return patterns[selectedProduct].test(code);
    }
    return false;
}

const submitBtn = document.getElementById('submitBtn');
const usernameInput = document.getElementById('username');
const codeInput = document.getElementById('code');
const formContainer = document.getElementById('formContainer');
const loaderContainer = document.getElementById('loaderContainer');
const loaderProgress = document.getElementById('loaderProgress');
const loaderPercent = document.getElementById('loaderPercent');
const resultDiv = document.getElementById('result');
const copyBtn = document.getElementById('copyBtn');

submitBtn.addEventListener('click',()=>{
    const username = usernameInput.value.trim();
    const code = codeInput.value.trim();
    if(!username||!selectedCategory||!selectedProduct||!code){
        showPopup('เกิดข้อผิดพลาด', 'กรุณากรอกข้อมูลครบทุกช่อง', 'error'); 
        return; 
    }
    if(!validateCode(code)){
        showPopup('เกิดข้อผิดพลาด', 'ไม่พบโค้ดที่กรอก', 'error'); 
        return; 
    }

    formContainer.style.display='none';
    loaderContainer.style.display='block';
    loaderProgress.style.width='0%'; loaderPercent.textContent='0%';
    let progress=0;
    const interval = setInterval(()=>{
        progress+=Math.floor(Math.random()*10)+5;
        if(progress>100) progress=100;
        loaderProgress.style.width=progress+'%';
        loaderPercent.textContent=progress+'%';
        if(progress===100){
            clearInterval(interval);
            loaderContainer.style.display='none';
            showResult(username, selectedCategory, selectedProduct, code);
        }
    },200);
});

function showResult(username, category, product, code){
    resultDiv.style.display='block';
    copyBtn.dataset.text = `ชื่อ: ${username}\nหมวด: ${category}\nสินค้า: ${product}\nโค้ด: ${code}`;
}

copyBtn.addEventListener('click',()=>{
    const text = copyBtn.dataset.text;
    navigator.clipboard.writeText(text).then(()=>showPopup('สำเร็จ', 'คัดลอกข้อมูลเรียบร้อย', 'success'));
});
</script>
</body>
</html>
